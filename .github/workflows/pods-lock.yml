- name: Locate Podfile
  run: |
    echo "Listing files:"
    ls -la
    echo "Searching Podfile..."
    find . -maxdepth 6 -iname "podfile" -print

- name: Pod install (in Podfile dir)
  run: |
    PODFILE_PATH="$(find . -maxdepth 6 -iname 'podfile' | head -n 1)"
    if [ -z "$PODFILE_PATH" ]; then
      echo "Podfile not found"
      exit 1
    fi
    POD_DIR="$(dirname "$PODFILE_PATH")"
    echo "Podfile found at: $PODFILE_PATH"
    cd "$POD_DIR"
    pod repo update
    pod install --verbose
